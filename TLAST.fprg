<?xml version="1.0"?>
<flowgorithm fileversion="2.18">
    <attributes>
        <attribute name="name" value="TutorTaskManagementSystem"/>
        <attribute name="authors" value="ChatGPT"/>
        <attribute name="about" value="Add, Update, Show Assignment with Priority Sort"/>
    </attributes>

    <function name="Main" type="None">
        <parameters/>
        <body>

            <declare name="n" type="Integer"/>
            <assign variable="n" expression="0"/>

            <declare name="cmd" type="String"/>
            <assign variable="cmd" expression="&quot;&quot;"/>

            <!-- ARRAYS -->
            <declare name="des" type="String" array="True" size="10"/>
            <declare name="code" type="String" array="True" size="10"/>
            <declare name="course" type="String" array="True" size="10"/>
            <declare name="lect" type="String" array="True" size="10"/>
            <declare name="deadline" type="String" array="True" size="10"/>
            <declare name="subID" type="String" array="True" size="10"/>
            <declare name="diff" type="Integer" array="True" size="10"/>
            <declare name="day" type="Integer" array="True" size="10"/>
            <declare name="status" type="String" array="True" size="10"/>
            <declare name="prio" type="Real" array="True" size="10"/>

            <while expression="cmd != &quot;---&quot;">
                <input variable="cmd" prompt=""/>

                <if expression="cmd == &quot;Add task&quot;">
                    <call function="AddTask">
                        <argument value="des"/>
                        <argument value="code"/>
                        <argument value="course"/>
                        <argument value="lect"/>
                        <argument value="deadline"/>
                        <argument value="subID"/>
                        <argument value="diff"/>
                        <argument value="day"/>
                        <argument value="status"/>
                        <argument value="prio"/>
                        <argument value="n"/>
                    </call>
                    <assign variable="n" expression="n + 1"/>
                </if>

                <if expression="cmd == &quot;Update task status&quot;">
                    <call function="UpdateTask">
                        <argument value="code"/>
                        <argument value="status"/>
                        <argument value="n"/>
                    </call>
                </if>

                <if expression="cmd == &quot;Show assigment&quot;">
                    <call function="ShowAssignment">
                        <argument value="des"/>
                        <argument value="code"/>
                        <argument value="course"/>
                        <argument value="lect"/>
                        <argument value="deadline"/>
                        <argument value="subID"/>
                        <argument value="status"/>
                        <argument value="prio"/>
                        <argument value="diff"/>
                        <argument value="day"/>
                        <argument value="n"/>
                    </call>
                </if>

            </while>

        </body>
    </function>

    <!-- ADD TASK -->
    <function name="AddTask" type="None">
        <parameters>
            <parameter name="des" type="String" array="True"/>
            <parameter name="code" type="String" array="True"/>
            <parameter name="course" type="String" array="True"/>
            <parameter name="lect" type="String" array="True"/>
            <parameter name="deadline" type="String" array="True"/>
            <parameter name="subID" type="String" array="True"/>
            <parameter name="diff" type="Integer" array="True"/>
            <parameter name="day" type="Integer" array="True"/>
            <parameter name="status" type="String" array="True"/>
            <parameter name="prio" type="Real" array="True"/>
            <parameter name="n" type="Integer"/>
        </parameters>

        <body>
            <input variable="des[n]" prompt=""/>
            <input variable="code[n]" prompt=""/>
            <input variable="course[n]" prompt=""/>
            <input variable="lect[n]" prompt=""/>
            <input variable="deadline[n]" prompt=""/>
            <input variable="subID[n]" prompt=""/>
            <input variable="diff[n]" prompt=""/>
            <input variable="day[n]" prompt=""/>
            <input variable="status[n]" prompt=""/>

            <if expression="day[n] == 0">
                <assign variable="prio[n]" expression="diff[n] * 1.0"/>
            </if>
            <if expression="day[n] != 0">
                <assign variable="prio[n]" expression="diff[n] * 1.0 / day[n]"/>
            </if>
        </body>
    </function>

    <!-- UPDATE -->
    <function name="UpdateTask" type="None">
        <parameters>
            <parameter name="code" type="String" array="True"/>
            <parameter name="status" type="String" array="True"/>
            <parameter name="n" type="Integer"/>
        </parameters>

        <body>
            <declare name="target" type="String"/>
            <declare name="newStat" type="String"/>

            <input variable="target" prompt=""/>
            <input variable="newStat" prompt=""/>

            <declare name="i" type="Integer"/>
            <for variable="i" start="0" end="n-1" step="1">
                <if expression="code[i] == target">
                    <assign variable="status[i]" expression="newStat"/>
                </if>
            </for>

        </body>
    </function>

    <!-- SHOW ASSIGNMENT -->
    <function name="ShowAssignment" type="None">
        <parameters>
            <parameter name="des" type="String" array="True"/>
            <parameter name="code" type="String" array="True"/>
            <parameter name="course" type="String" array="True"/>
            <parameter name="lect" type="String" array="True"/>
            <parameter name="deadline" type="String" array="True"/>
            <parameter name="subID" type="String" array="True"/>
            <parameter name="status" type="String" array="True"/>
            <parameter name="prio" type="Real" array="True"/>
            <parameter name="diff" type="Integer" array="True"/>
            <parameter name="day" type="Integer" array="True"/>
            <parameter name="n" type="Integer"/>
        </parameters>

        <body>
            <!-- SORTING -->
            <call function="SortPriority">
                <argument value="des"/>
                <argument value="code"/>
                <argument value="course"/>
                <argument value="lect"/>
                <argument value="deadline"/>
                <argument value="subID"/>
                <argument value="status"/>
                <argument value="prio"/>
                <argument value="diff"/>
                <argument value="day"/>
                <argument value="n"/>
            </call>

            <declare name="i" type="Integer"/>

            <for variable="i" start="0" end="n-1" step="1">

                <output expression="&quot;Prioritas: &quot; + prio[i]"/>

                <if expression="status[i] == &quot;Selesai&quot;">
                    <output expression="des[i] + &quot;|&quot; + code[i] + &quot;|&quot; + course[i] + &quot;|&quot; + lect[i] + &quot;|&quot; + subID[i] + &quot;|Selesai&quot;"/>
                </if>

                <if expression="status[i] != &quot;Selesai&quot;">
                    <declare name="rek" type="String"/>

                    <if expression="prio[i] > 3">
                        <assign variable="rek" expression="&quot;Penting! Anda harus mengerjakan tugas ini segera&quot;"/>
                    </if>
                    <if expression="prio[i] >= 1.5 AND prio[i] <= 3">
                        <assign variable="rek" expression="&quot;Tugas ini memiliki prioritas menengah&quot;"/>
                    </if>
                    <if expression="prio[i] < 1.5">
                        <assign variable="rek" expression="&quot;Tugas ini relatif ringan, namun jangan tunda terlalu lama&quot;"/>
                    </if>

                    <output expression="des[i] + &quot;|&quot; + code[i] + &quot;|&quot; + course[i] + &quot;|&quot; + lect[i] + &quot;|&quot; + deadline[i] + &quot;|&quot; + subID[i] + &quot;|Belum Selesai|&quot; + rek"/>
                </if>

            </for>

        </body>
    </function>

    <!-- SORT FUNCTION -->
    <function name="SortPriority" type="None">
        <parameters>
            <parameter name="des" type="String" array="True"/>
            <parameter name="code" type="String" array="True"/>
            <parameter name="course" type="String" array="True"/>
            <parameter name="lect" type="String" array="True"/>
            <parameter name="deadline" type="String" array="True"/>
            <parameter name="subID" type="String" array="True"/>
            <parameter name="status" type="String" array="True"/>
            <parameter name="prio" type="Real" array="True"/>
            <parameter name="diff" type="Integer" array="True"/>
            <parameter name="day" type="Integer" array="True"/>
            <parameter name="n" type="Integer"/>
        </parameters>

        <body>

            <declare name="i" type="Integer"/>
            <declare name="j" type="Integer"/>

            <declare name="tmpS" type="String"/>
            <declare name="tmpI" type="Integer"/>
            <declare name="tmpR" type="Real"/>

            <for variable="i" start="0" end="n-2" step="1">
                <for variable="j" start="0" end="n-2-i" step="1">

                    <if expression="prio[j] < prio[j+1]">

                        <assign variable="tmpR" expression="prio[j]"/>
                        <assign variable="prio[j]" expression="prio[j+1]"/>
                        <assign variable="prio[j+1]" expression="tmpR"/>

                        <assign variable="tmpS" expression="des[j]"/>
                        <assign variable="des[j]" expression="des[j+1]"/>
                        <assign variable="des[j+1]" expression="tmpS"/>

                        <assign variable="tmpS" expression="code[j]"/>
                        <assign variable="code[j]" expression="code[j+1]"/>
                        <assign variable="code[j+1]" expression="tmpS"/>

                        <assign variable="tmpS" expression="course[j]"/>
                        <assign variable="course[j]" expression="course[j+1]"/>
                        <assign variable="course[j+1]" expression="tmpS"/>

                        <assign variable="tmpS" expression="lect[j]"/>
                        <assign variable="lect[j]" expression="lect[j+1]"/>
                        <assign variable="lect[j+1]" expression="tmpS"/>

                        <assign variable="tmpS" expression="deadline[j]"/>
                        <assign variable="deadline[j]" expression="deadline[j+1]"/>
                        <assign variable="deadline[j+1]" expression="tmpS"/>

                        <assign variable="tmpS" expression="subID[j]"/>
                        <assign variable="subID[j]" expression="subID[j+1]"/>
                        <assign variable="subID[j+1]" expression="tmpS"/>

                        <assign variable="tmpS" expression="status[j]"/>
                        <assign variable="status[j]" expression="status[j+1]"/>
                        <assign variable="status[j+1]" expression="tmpS"/>

                        <assign variable="tmpI" expression="diff[j]"/>
                        <assign variable="diff[j]" expression="diff[j+1]"/>
                        <assign variable="diff[j+1]" expression="tmpI"/>

                        <assign variable="tmpI" expression="day[j]"/>
                        <assign variable="day[j]" expression="day[j+1]"/>
                        <assign variable="day[j+1]" expression="tmpI"/>

                    </if>

                </for>
            </for>

        </body>
    </function>

</flowgorithm>
